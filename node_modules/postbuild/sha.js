'use strict';

const crypto = require('crypto');
const fs = require('fs');


module.exports = function sha(filename){
    let sha = crypto.createHash('sha');
    let fContent = fs.readFileSync(filename).toString();
    sha.update(fContent);
    return sha.digest('hex');
};

module.exports.async = function sha(fileName, cb){

    let sha = crypto.createHash('sha');
    let shaSum;

    let readStream = fs.createReadStream(fileName);
    readStream.on('data', function(data){
        if (data){
            console.log('data', data);
            sha.update(data);
        }
    });

    readStream.on('end', function () {
        console.log('end');
        cb(null,sha.digest('hex'));
    });
    readStream.on('close', function () {
        console.log('close');
        // return shaSum = sha.digest('hex');
    });

};
